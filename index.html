<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Redirecting...</title>
<style>
  /* ç”»é¢ã‚’é»’ãã—ã¦ã€æ–‡å­—ã‚’ç›®ç«‹ãŸãªãã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ« */
  body {
    background-color: #111; /* ã»ã¼é»’ */
    color: #555;            /* æ–‡å­—ã¯æš—ã„ã‚°ãƒ¬ãƒ¼ */
    font-family: sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    text-align: center;
  }
  h1 { font-size: 1.2rem; font-weight: normal; }
</style>
<script>
  const params = new URLSearchParams(window.location.search);
  
  const shortcut = params.get('name'); // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå
  const file = params.get('file');     // Obsidianãƒ•ã‚¡ã‚¤ãƒ«å
  const vault = params.get('vault');   // Obsidianä¿ç®¡åº«å
  const openApp = params.get('open');  // ã‚¢ãƒ—ãƒªèµ·å‹•ã®ã¿ç”¨

  // 1. ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆèµ·å‹•
  if (shortcut) {
    window.location.href = 'shortcuts://run-shortcut?name=' + encodeURIComponent(shortcut);
    document.body.innerHTML = "<h1>ğŸš€ " + shortcut + " ã‚’èµ·å‹•ä¸­...</h1>";
  } 
  // 2. Obsidianèµ·å‹•
  else if (file || vault || openApp) {
    let uri = 'obsidian://open';
    let queries = [];

    if (vault) queries.push('vault=' + encodeURIComponent(vault));
    if (file)  queries.push('file=' + encodeURIComponent(file));

    if (queries.length > 0) {
      uri += '?' + queries.join('&');
    }

    window.location.href = uri;
    document.body.innerHTML = "<h1>ğŸ’ Obsidianã‚’èµ·å‹•ã—ã¦ã„ã¾ã™...</h1>";
  }
  // 3. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—
  else {
    document.body.innerHTML = "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚<br>?name=ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå<br>?file=ãƒãƒ¼ãƒˆå<br>?open=1";
  }

  // 5ç§’å¾Œã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹ï¼ˆiOSã§ã¯å‹•ä½œã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€å¿µã®ãŸã‚å®Ÿè¡Œï¼‰
  setTimeout(function() {
    window.close();
  }, 5000);
</script>
</head>
<body></body>
</html>
