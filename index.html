<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Redirecting...</title>
<script>
  const params = new URLSearchParams(window.location.search);
  
  // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
  const shortcut = params.get('name'); // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆç”¨
  const file = params.get('file');     // Obsidianãƒ•ã‚¡ã‚¤ãƒ«å
  const vault = params.get('vault');   // Obsidianä¿ç®¡åº«åï¼ˆçœç•¥å¯ï¼‰

  // 1. ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®å ´åˆ (?name=...)
  if (shortcut) {
    window.location.href = 'shortcuts://run-shortcut?name=' + encodeURIComponent(shortcut);
    document.body.innerHTML = "<h1>ğŸš€ ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: " + shortcut + " ã‚’èµ·å‹•ä¸­...</h1>";
  } 
  // 2. Obsidianã®å ´åˆ (?file=...)
  else if (file) {
    let uri = 'obsidian://open?file=' + encodeURIComponent(file);
    if (vault) {
      uri += '&vault=' + encodeURIComponent(vault);
    }
    window.location.href = uri;
    document.body.innerHTML = "<h1>ğŸ’ Obsidian: " + file + " ã‚’é–‹ã„ã¦ã„ã¾ã™...</h1>";
  }
  // 3. ã‚¨ãƒ©ãƒ¼
  else {
    document.body.innerHTML = "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚<br>?name=ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå<br>ã¾ãŸã¯<br>?file=Obsidianã®ãƒãƒ¼ãƒˆå";
  }
</script>
</head>
<body></body>
</html>
